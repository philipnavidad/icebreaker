<!DOCTYPE html>
<html>
<head>
<script src="https://aframe.io/releases/0.3.0/aframe.min.js"></script>
<script src="https://cdn.rawgit.com/AltspaceVR/AltspaceSDK/v2.4.2/dist/altspace.min.js"></script>
<script src="navigate.js"></script>
<script src="components/avr-visible.js"></script>
<script src="components/visible-to-moderators.js"></script>
</head>
<body>
<a-scene altspace="fullspace: true">
    <a-assets>
        <img id="close" src="icon-close.png">
        <a-mixin id="cockpit-bg"
            geometry="primitive: plane; width: 1; height: 0.5" material="color: black; opacity: 0.8"
            n-cockpit-parent altspace-cursor-collider="enabled: true"></a-mixin>
		<a-mixin id="cockpit-text"
            n-text="fontSize: 2; horizontalAlign: middle"
            position="0 0.1 0.02" scale="0.3 0.3 0.3" n-cockpit-parent></a-mixin>
		<a-mixin id="cockpit-button"
            geometry="primitive: plane; width: 0.4; height: 0.1;" material="color: #1eced5"
            n-cockpit-parent altspace-cursor-collider="enabled: true"></a-mixin>
        <a-mixin id="cockpit-button-text"
            n-text="fontSize: 2; horizontalAlign: middle"
            position="0 0 0.02" scale="0.2 0.2 0.2"n-cockpit-parent></a-mixin>
        <a-mixin id="cockpit-close"
            wire="on: click; emit: close-cockpit; targets: #cockpit"></a-mixin>
		<a-mixin id="cockpit-open"
            wire="on: click; emit: open-cockpit; targets: #cockpit"></a-mixin>
		<a-mixin id="skeleton-close"
            wire="on: click; emit: close-skeleton; targets: #skeleton"></a-mixin>
		<a-mixin id="skeleton-open"
            wire="on: click; emit: open-skeleton; targets: #skeleton"></a-mixin>
		<a-mixin id="skeleton-bg"
            geometry="primitive: plane; width: 1; height: 0.5" material="color: black; opacity: 0.8"
            n-skeleton-parent="part: head;" altspace-cursor-collider="enabled: true" 
			position="0.2 0.2 -0.5" sync sync-n-skeleton-parent></a-mixin>
		<a-mixin id="skeleton-text"
            n-text="fontSize: 2; horizontalAlign: middle"
            position="0.2 0.27 -0.48" scale="0.3 0.3 0.3" 
			n-skeleton-parent="part: head;" sync sync-n-skeleton-parent></a-mixin>
		<a-mixin id="skeleton-button"
            geometry="primitive: plane; width: 0.4; height: 0.1;" material="color: #1eced5"
			n-skeleton-parent="part: head;" sync sync-n-skeleton-parent
           	altspace-cursor-collider="enabled: true"></a-mixin>
        <a-mixin id="skeleton-button-text"
            n-text="fontSize: 2; horizontalAlign: middle"
            position="0.2 0.27 -0.48" scale="0.3 0.3 0.3"
			n-skeleton-parent="part: head;" sync sync-n-skeleton-parent></a-mixin>
    </a-assets>
    <a-entity id="cockpit1" position="0 0.6 -1" n-cockpit-parent>
        <a-animation attribute="scale" begin="close-cockpit" dur="1" from="1 1 1" to="0.0001 0.0001 0.0001" fill="forwards" direction="normal" repeat="0"></a-animation>
        <a-entity mixin="cockpit-bg"></a-entity>
		<a-entity mixin="cockpit-text" n-text="text: Would you rather...;"></a-entity>
		<a-entity mixin="cockpit-button" position="-0.25 -0.1 0.02"
			wire="on: click; emit: open-skeleton; targets: #skeleton1;"
			wire__toggle="on: click; emit: close-cockpit; targets: #cockpit1;">
			<a-entity mixin="cockpit-button-text" position="0 0 0.02" n-text="text: be able to fly;"></a-entity>
		</a-entity>	
		<a-entity mixin="cockpit-button" position="0.25 -0.1 0.02"
			wire="on: click; emit: open-skeleton; targets: #skeleton1;">
			<a-entity mixin="cockpit-button-text" position="0 0 0.02" n-text="text: be invisible;"></a-entity>
		</a-entity>		
		<a-entity
			position="0 -0.3 0"
			scale="0.05 0.05 0.05"
			geometry="primitive: circle" material="transparent: true; src: #close"
			n-cockpit-parent altspace-cursor-collider="enabled: true"
		  	wire="on: click; emit: close-cockpit; targets: #cockpit1">
		</a-entity>
	</a-entity>
	<a-entity id="skeleton1" scale="0.0001 0.0001 0.0001" n-skeleton-parent="part: head;" sync="own-on: skeleton1-toggle" sync-n-skeleton-parent>
        <a-animation attribute="scale" begin="open-skeleton" dur="1" from="0.0001 0.0001 0.0001" to="1 1 1" fill="forwards" direction="normal" repeat="0"></a-animation>
        <a-animation attribute="scale" begin="close-skeleton" dur="1" from="1 1 1" to="0.0001 0.0001 0.0001" fill="forwards" direction="normal" repeat="0"></a-animation>
		<a-entity mixin="skeleton-bg">
			<a-entity mixin="skeleton-text" n-text="text: Would you rather...;"</a-entity>
			<a-entity mixin="skeleton-button" position="-0.25 0 0.01"
				wire="on: click; emit: close-skeleton, open-cockpit; targets: #skeleton1, #cockpit2;"></a-entity>
				<a-entity mixin="skeleton-button-text" position="0 0 0.01" n-text="text: be able to fly;"></a-entity>
			<a-entity mixin="skeleton-button" position="0.25 0 0.01"
				wire="on: click; emit: close-skeleton, open-cockpit; targets: #skeleton1, #cockpit2;"></a-entity>
				<a-entity mixin="cockpit-button-text" position="0 0 0.01" n-text="text: be invisible;"></a-entity>
		</a-entity>
	</a-entity>
	<a-entity id="cockpit2" position="0 0.6 -1" scale="0.0001 0.0001 0.0001" n-cockpit-parent>
        <a-animation attribute="scale" begin="open-cockpit" dur="1" from="0.0001 0.0001 0.0001" to="1 1 1" fill="forwards" direction="normal" repeat="0"></a-animation>
        <a-animation attribute="scale" begin="close-cockpit" dur="1" from="1 1 1" to="0.0001 0.0001 0.0001" fill="forwards" direction="normal" repeat="0"></a-animation>
        <a-entity mixin="cockpit-bg">
			<a-entity mixin="cockpit-text" n-text="text: Would you rather...;"</a-entity>
			<a-entity mixin="cockpit-button" position="-0.25 -0.25 0.01"
				wire="on: click; emit: open-skeleton, close-cockpit; targets: #skeleton1, #cockpit2;"></a-entity>
				<a-entity mixin="cockpit-button-text" position="0 0 0.01" n-text="text: be able to fly;"></a-entity>
			<a-entity mixin="cockpit-button" position="0.25 -0.25 0.01"
				wire="on: click; emit: open-skeleton, close-cockpit; targets: #skeleton1, #cockpit2;"></a-entity>
				<a-entity mixin="cockpit-button-text" position="0 0 0.01" n-text="text: be invisible;"></a-entity>
		</a-entity>
		<a-entity
			position="0 -0.35 0"
			scale="0.05 0.05 0.05"
			geometry="primitive: circle" material="transparent: true; src: #close"
			n-cockpit-parent altspace-cursor-collider="enabled: true"
		  	wire="on: click; emit: close-cockpit; targets: #cockpit2"></a-entity>
	</a-entity>
</a-scene>
</body>
</html>
